<template name="App_mytasks">

    <h1 class="page-header">My tasks</h1>
    <h2>{{user.displayName}}</h2>

    <!-- <a href="{{pathFor 'App.mytasks.user.loggedInUser'}}">My tasks</a> | <a href="{{pathFor 'App.mytasks.department' department=currentUser.department}}">My department</a> -->

    {{#if forLoggedInUser}}
    {{/if}}

    <p>Not including OH (on hold) projects or tasks (apart from completed tasks)</p>

    <table class="table">
        <thead>
          <tr>
            <th scope="col">Project</th>
            {{#if actionsOverdue}}
            <th scope="col">Overdue</th>
            {{/if}}
            <th scope="col">This week</th>
            <th scope="col">Next week</th>
          </tr>
        </thead>
        <tbody>

            {{#each projectsWithWeeklySummary}}
            <tr class="js-table-row" data-project-code={{this.code}}>
                <td>
                    <p>{{this.code}}</p>
                    <p>{{this.name}}</p>
                </td>
                {{#if actionsOverdue}}
                <td>
                    {{#each this.actionsOverdue}}{{> App_mytasks__project_action_text this}}{{/each}}
                </td>
                {{/if}}
                <td>
                    {{#each this.actionsThisWeek}}{{> App_mytasks__project_action_text this}}{{/each}}
                </td>
                <td>
                    {{#each this.actionsNextWeek}}{{> App_mytasks__project_action_text this}}{{/each}}
                </td>
            </tr>
            {{/each}}

        </tbody>
      </table>

      {{> timeline}}
    
</template>

<template name="App_mytasks__project_action_text">
    <p>({{this.status}}) {{this.description}}</p>
</template>