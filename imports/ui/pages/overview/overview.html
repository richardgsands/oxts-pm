<template name="App_overview">

    <h1 class="page-header">Overview</h1>

    <a href="{{pathFor 'App.overview.user.loggedInUser'}}">My tasks</a> | <a href="{{pathFor 'App.overview.department' department=currentUser.department}}">My department</a>

    {{#if forLoggedInUser}}
    {{/if}}

    <table class="table">
        <thead>
          <tr>
            <th scope="col">Project</th>
            <th scope="col">Overdue</th>
            <th scope="col">This week</th>
            <th scope="col">Next week</th>
          </tr>
        </thead>
        <tbody>

            {{#each projectsWithWeeklySummary}}
            <tr>
                <td>
                    <p>{{this.code}}</p>
                    <p>{{this.name}}</p>
                </td>
                <td>
                    {{#each this.actionsOverdue}}{{> App_overview__project_action_text this}}{{/each}}
                </td>
                <td>
                    {{#each this.actionsNextWeek}}{{> App_overview__project_action_text this}}{{/each}}
                </td>
                <td>
                    {{#each this.actionsThisWeek}}{{> App_overview__project_action_text this}}{{/each}}
                </td>
            </tr>
            {{/each}}

        </tbody>
      </table>





    {{#if actionsOverdue}}
        <h2>Overdue</h2>
        {{#each actionsOverdue}}
        {{> project_action action=this}}
        {{/each}}
    {{/if}}

    <h2>This week</h2>
    {{#each actionsThisWeek}}
    {{> project_action action=this}}
    {{else}}
    <p>No actions this week</p>
    {{/each}}

    <h2>Next week</h2>
    {{#each actionsNextWeek}}
    {{> project_action action=this}}
    {{else}}
    <p>No actions next week</p>
    {{/each}}
    
</template>

<template name="App_overview__project_action_text">
    <p>({{this.status}}) {{this.description}}</p>
</template>